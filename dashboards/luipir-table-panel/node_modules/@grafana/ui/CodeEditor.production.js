function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("./index.production.js"),n=e(require("react"));require("@grafana/data"),require("react-dom"),require("tty"),require("util"),require("os"),require("moment"),require("@grafana/e2e-selectors");var r=require("monaco-editor/esm/vs/editor/editor.api"),i=e(require("react-monaco-editor"));function o(e,n,r){var i,o,a,l=[];try{for(var s=t.__values(n),d=s.next();!d.done;d=s.next()){var g=d.value;e&&!g.label.startsWith(e)||l.push(t.__assign(t.__assign({},g),{kind:u(g.kind),range:r,insertText:null!==(a=g.insertText)&&void 0!==a?a:g.label}))}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return l}function u(e){switch(e){case t.CodeEditorSuggestionItemKind.Method:return r.languages.CompletionItemKind.Method;case t.CodeEditorSuggestionItemKind.Field:return r.languages.CompletionItemKind.Field;case t.CodeEditorSuggestionItemKind.Property:return r.languages.CompletionItemKind.Property;case t.CodeEditorSuggestionItemKind.Constant:return r.languages.CompletionItemKind.Constant;case t.CodeEditorSuggestionItemKind.Text:return r.languages.CompletionItemKind.Text}return r.languages.CompletionItemKind.Text}function a(e,t){if(e&&t)return r.languages.registerCompletionItemProvider(e,{triggerCharacters:["$"],provideCompletionItems:function(e,n,r){var i={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:n.column,endColumn:n.column};if("$"===r.triggerCharacter)return i.startColumn=n.column-1,{suggestions:o("$",t(),i)};var u=function(e){for(var t=e.length-1;t>0;t--){var n=e.charAt(t);if("$"===n)return{index:t,prefix:e.substring(t)};if(" "===n||"\t"===n||'"'===n||"'"===n)return{index:t+1,prefix:e.substring(t+1)}}return{index:0,prefix:e}}(e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column})),a=u.index,l=u.prefix;i.startColumn=a+1;var s=o(l,t(),i);return s.length?{suggestions:s}:void 0}})}var l=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.getEditorValue=function(){return""},t.onBlur=function(){var e=t.props.onBlur;e&&e(t.getEditorValue())},t.editorWillMount=function(e){var n=t.props,r=n.language,i=n.getSuggestions;i&&(t.completionCancel=a(r,i))},t.editorDidMount=function(e){var n=t.props,i=n.onSave,o=n.onEditorDidMount;t.getEditorValue=function(){return e.getValue()},i&&e.addCommand(r.KeyMod.CtrlCmd|r.KeyCode.KEY_S,(function(){i(t.getEditorValue())})),o&&o(e)},t}return t.__extends(o,e),o.prototype.componentWillUnmount=function(){this.completionCancel&&(console.log("dispose of the custom completion stuff"),this.completionCancel.dispose())},o.prototype.componentDidUpdate=function(e){var t=this.props,n=t.getSuggestions,r=t.language;n&&r!==e.language&&(this.completionCancel&&this.completionCancel.dispose(),this.completionCancel=a(r,n))},o.prototype.render=function(){var e,t=this.props,r=t.theme,o=t.language,u=t.width,a=t.height,l=t.showMiniMap,s=t.showLineNumbers,d=t.readOnly,g=null!==(e=this.props.value)&&void 0!==e?e:"",m={wordWrap:"off",codeLens:!1,minimap:{enabled:g.length>100&&l,renderCharacters:!1},readOnly:d,lineNumbersMinChars:4,lineDecorationsWidth:0,overviewRulerBorder:!1,automaticLayout:!0};return s||(m.glyphMargin=!1,m.folding=!1,m.lineNumbers="off",m.lineDecorationsWidth=5,m.lineNumbersMinChars=0),n.createElement("div",{onBlur:this.onBlur},n.createElement(i,{width:u,height:a,language:o,theme:r.isDark?"vs-dark":"vs-light",value:g,options:m,editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount}))},o}(n.PureComponent),s=t.withTheme(l);exports.default=s;
//# sourceMappingURL=CodeEditor.production.js.map
